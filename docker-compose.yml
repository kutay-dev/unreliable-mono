services:
  auth:
    build:
      context: .
      dockerfile: apps/auth/Dockerfile
      target: production
    environment:
      - NODE_ENV=prod
      - PORT=3000
    expose:
      - "3000"
    restart: unless-stopped

  chat:
    build:
      context: .
      dockerfile: apps/chat/Dockerfile
      target: production
    environment:
      - NODE_ENV=prod
      - PORT=3000
    expose:
      - "3000"
    restart: unless-stopped

  gateway:
    build:
      context: .
      dockerfile: apps/gateway/Dockerfile
      target: production
    environment:
      - NODE_ENV=prod
      - PORT=3000
    ports:
      - "3000:3000"
    depends_on:
      - auth
      - chat
    restart: unless-stopped
